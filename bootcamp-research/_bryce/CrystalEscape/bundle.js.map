{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./lib/background.js","webpack:///./lib/bullet.js","webpack:///./lib/crystal.js","webpack:///./lib/crystal_escape.js","webpack:///./lib/enemy_ship.js","webpack:///./lib/explosion.js","webpack:///./lib/game.js","webpack:///./lib/large_enemy.js","webpack:///./lib/medium_enemy.js","webpack:///./lib/moving_object.js","webpack:///./lib/player.js","webpack:///./lib/powerup.js","webpack:///./lib/score.js","webpack:///./lib/ship.js","webpack:///./lib/small_enemy.js","webpack:///./lib/static_object.js","webpack:///./lib/util.js"],"names":[],"mappings":";AAAA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;;AAGA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,kDAA0C,gCAAgC;AAC1E;AACA;;AAEA;AACA;AACA;AACA,gEAAwD,kBAAkB;AAC1E;AACA,yDAAiD,cAAc;AAC/D;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iDAAyC,iCAAiC;AAC1E,wHAAgH,mBAAmB,EAAE;AACrI;AACA;;AAEA;AACA;AACA;AACA,mCAA2B,0BAA0B,EAAE;AACvD,yCAAiC,eAAe;AAChD;AACA;AACA;;AAEA;AACA,8DAAsD,+DAA+D;;AAErH;AACA;;;AAGA;AACA;;;;;;;;;;;;AClFA;AACA,cAAc,uBAAuB;AACrC;AACA;AACA,oDAAoD,UAAU;AAC9D;AACA,GAAG;AACH,oDAAoD,UAAU;AAC9D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;;;;;;;;;;;AC/CA,qBAAqB,mBAAO,CAAC,+CAAiB;;AAE9C;AACA;AACA,SAAS,sGAAsG;AAC/G;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;;;;;;;;;;;;ACfA,qBAAqB,mBAAO,CAAC,+CAAiB;;AAE9C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;;AAEA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;;AAEA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;;;;;;;;;;;ACrDA,aAAa,mBAAO,CAAC,6BAAQ;;AAE7B;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA,wBAAwB,2DAA2D;AACnF;AACA,CAAC;;;;;;;;;;;;ACjBD,aAAa,mBAAO,CAAC,6BAAQ;;AAE7B;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;;;;;;;;;;;;ACtBA,qBAAqB,mBAAO,CAAC,+CAAiB;;AAE9C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;;;;;;;;;;;ACjCA,mBAAmB,mBAAO,CAAC,yCAAc;AACzC,aAAa,mBAAO,CAAC,6BAAQ;AAC7B,eAAe,mBAAO,CAAC,iCAAU;AACjC,eAAe,mBAAO,CAAC,iCAAU;AACjC,kBAAkB,mBAAO,CAAC,yCAAc;AACxC,mBAAmB,mBAAO,CAAC,2CAAe;AAC1C,oBAAoB,mBAAO,CAAC,6CAAgB;AAC5C,mBAAmB,mBAAO,CAAC,2CAAe;AAC1C,kBAAkB,mBAAO,CAAC,uCAAa;AACvC,gBAAgB,mBAAO,CAAC,mCAAW;AACnC,gBAAgB,mBAAO,CAAC,mCAAW;AACnC,cAAc,mBAAO,CAAC,+BAAS;AAC/B,aAAa,mBAAO,CAAC,6BAAQ;;AAE7B;AACA,cAAc,2DAA2D;AACzE;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA,0BAA0B,aAAa;AACvC,4BAA4B,aAAa;AACzC;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA,oCAAoC,iEAAiE;AACrG,mCAAmC,+DAA+D;AAClG;;AAEA;AACA;AACA;AACA,GAAG;AACH;AACA,GAAG;AACH;AACA,GAAG;AACH;AACA,GAAG;AACH;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA,GAAG;AACH;AACA,GAAG;AACH;AACA,GAAG;AACH;AACA,GAAG;AACH;AACA;AACA;;AAEA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA,2BAA2B,2BAA2B;AACtD,GAAG;AACH;AACA;AACA,0BAA0B,iEAAiE;AAC3F,GAAG;AACH;AACA,GAAG;AACH;AACA,GAAG;AACH,+BAA+B,wBAAwB;AACvD;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA,0BAA0B,aAAa;AACvC;;AAEA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,2BAA2B,kBAAkB;AAC7C,GAAG;AACH;AACA;AACA;AACA;AACA,4BAA4B,kBAAkB;AAC9C,GAAG;AACH;AACA,2BAA2B,kBAAkB;AAC7C;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAM;AACN;AACA;AACA,MAAM;AACN;AACA;AACA;AACA,KAAK;AACL,GAAG;AACH;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;;;;;;;;;;;ACnOA,kBAAkB,mBAAO,CAAC,yCAAc;;AAExC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;;;;;;;;;;;ACvCA,kBAAkB,mBAAO,CAAC,yCAAc;;AAExC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;;;;;;;;;;;ACvCA,qBAAqB,mBAAO,CAAC,+CAAiB;;AAE9C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;;;;;;;;;;;;ACtBA,aAAa,mBAAO,CAAC,6BAAQ;AAC7B,aAAa,mBAAO,CAAC,6BAAQ;;AAE7B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;;AAEA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAI;AACJ;AACA;AACA,KAAK;AACL;AACA,KAAK;AACL;AACA,KAAK;AACL;AACA,KAAK;AACL;AACA,KAAK;AACL;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAI;AACJ;AACA;AACA,IAAI;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;;;;;;;;;;;ACnLA,qBAAqB,mBAAO,CAAC,+CAAiB;;AAE9C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;;;;;;;;;;;ACjDA;AACA,cAAc,OAAO;AACrB;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;;;;;;;;;;;AC1BA,qBAAqB,mBAAO,CAAC,+CAAiB;AAC9C,eAAe,mBAAO,CAAC,iCAAU;;AAEjC;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,6BAA6B,gFAAgF;;AAE7G;AACA;AACA;;AAEA;;;;;;;;;;;;ACnBA,kBAAkB,mBAAO,CAAC,yCAAc;;AAExC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;;;;;;;;;;;ACvCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,EAAE;AACF;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sBAAsB;AACtB;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;;;;;;;;;;;AC3EA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA","file":"./bundle.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = \"./lib/crystal_escape.js\");\n","class Background {\n\tconstructor({ ctx, type, level = 1 }) {\n\t\tthis.ctx = ctx;\n\t\tif (type === 'background') {\n\t\t\tthis.path = `./assets/images/backgrounds/level_${level % 5}/background.png`;\n\t\t\tthis.scrollSpeed = 1 + level * 0.1;\n\t\t} else {\n\t\t\tthis.path = `./assets/images/backgrounds/level_${level % 5}/midground.png`;\n\t\t\tthis.scrollSpeed = 2 + level * 0.2;\n\t\t}\n\t\tthis.x = 0;\n\t\tthis.y = 0;\n\t\tthis.img = new Image();\n\t\tthis.img.src = this.path;\n\t\tthis.img.onload = () => {\n\t\t\tthis.scale = this.ctx.canvas.height / this.img.naturalHeight;\n\t\t};\n\n\t\tthis.draw = this.draw.bind(this);\n\t}\n\n\tdraw() {\n\t\tif (this.img.naturalWidth > 0) {\n\t\t\tthis.ctx.clearRect(0, 0, this.ctx.canvas.width, this.ctx.canvas.height);\n\t\t\tlet i = 0;\n\t\t\twhile (this.x + this.img.naturalWidth * this.scale * i < this.ctx.canvas.width) {\n\t\t\t\tthis.ctx.drawImage(\n\t\t\t\t\tthis.img,\n\t\t\t\t\t0,\n\t\t\t\t\t0,\n\t\t\t\t\tthis.img.naturalWidth,\n\t\t\t\t\tthis.img.naturalHeight,\n\t\t\t\t\tthis.x + this.img.naturalWidth * this.scale * i,\n\t\t\t\t\t0,\n\t\t\t\t\tthis.img.naturalWidth * this.scale,\n\t\t\t\t\tthis.img.naturalHeight * this.scale\n\t\t\t\t);\n\t\t\t\ti++;\n\t\t\t}\n\t\t\tif (this.x <= -this.img.naturalWidth * this.scale) {\n\t\t\t\tthis.x = 0;\n\t\t\t}\n\t\t\tthis.x -= this.scrollSpeed;\n\t\t}\n\t}\n}\n\nmodule.exports = Background;\n","const MovingObject = require('./moving_object');\n\nclass Bullet extends MovingObject {\n\tconstructor(options) {\n\t\tsuper({ ...options, path: Bullet.PATH, spriteWidth: Bullet.SPRITE_WIDTH, spriteHeight: Bullet.SPRITE_HEIGHT });\n\t}\n}\n\nBullet.PATH = './assets/images/sprites/bullet.png';\nBullet.SPRITE_HEIGHT = 8;\nBullet.SPRITE_WIDTH = 11;\nBullet.SCALE = 1;\nBullet.HEIGHT = Bullet.SPRITE_HEIGHT * Bullet.SCALE;\nBullet.WIDTH = Bullet.SPRITE_WIDTH * Bullet.SCALE;\n\nmodule.exports = Bullet;\n","const MovingObject = require('./moving_object');\n\nclass Crystal extends MovingObject {\n\tconstructor(options) {\n\t\tconsole.log('New Crystal');\n\t\tsuper({\n\t\t\tpath: Crystal.PATH,\n\t\t\tscale: Crystal.SCALE,\n\t\t\tspriteWidth: Crystal.SPRITE_WIDTH,\n\t\t\tspriteHeight: Crystal.SPRITE_HEIGHT,\n\t\t\tspriteMaxX: Crystal.SPRITE_MAX_X,\n\t\t\tspriteMaxY: Crystal.SPRITE_MAX_Y,\n\t\t\tvel: [Math.random() * Crystal.TOP_SPEED, Math.random() * Crystal.TOP_SPEED],\n\t\t\tpos: [\n\t\t\t\toptions.game.gameCanvas.width - Crystal.WIDTH * 2,\n\t\t\t\tMath.floor(Math.random() * (options.game.gameCanvas.height - Crystal.HEIGHT + 1))\n\t\t\t],\n\t\t\t...options\n\t\t});\n\t}\n\n\tmove() {\n\t\t//Restrict movement to window and bounce off edges\n\t\tif (this.pos[0] < 0) {\n\t\t\tthis.vel[0] *= -1;\n\t\t\tthis.pos[0] = 1;\n\t\t} else if (this.pos[0] > this.game.gameCanvas.width - this.width) {\n\t\t\tthis.vel[0] *= -1;\n\t\t\tthis.pos[0] = this.game.gameCanvas.width - this.width - 1;\n\t\t}\n\n\t\tif (this.pos[1] < 0) {\n\t\t\tthis.vel[1] *= -1;\n\t\t\tthis.pos[1] = 1;\n\t\t} else if (this.pos[1] > this.game.gameCanvas.height - this.height) {\n\t\t\tthis.vel[1] *= -1;\n\t\t\tthis.pos[1] = this.game.gameCanvas.height - this.height - 1;\n\t\t}\n\n\t\tsuper.move();\n\t}\n}\n\nCrystal.PATH = './assets/images/sprites/crystal.png';\nCrystal.SPRITE_MAX_X = 4;\nCrystal.SPRITE_MAX_Y = 1;\nCrystal.SCALE = 2;\nCrystal.SPRITE_WIDTH = 10;\nCrystal.SPRITE_HEIGHT = 24;\nCrystal.WIDTH = Crystal.SPRITE_WIDTH * Crystal.SCALE;\nCrystal.HEIGHT = Crystal.SPRITE_HEIGHT * Crystal.SCALE;\nCrystal.TOP_SPEED = 4;\n\nmodule.exports = Crystal;\n","const Game = require('./game');\n\ndocument.addEventListener('DOMContentLoaded', () => {\n\tconst backgroundCanvas = document.getElementById('background-canvas');\n\tconst backgroundCtx = backgroundCanvas.getContext('2d');\n\n\tconst midgroundCanvas = document.getElementById('midground-canvas');\n\tconst midgroundCtx = midgroundCanvas.getContext('2d');\n\n\tconst gameCanvas = document.getElementById('game-canvas');\n\tconst gameCtx = gameCanvas.getContext('2d');\n\n\tconst HUDCanvas = document.getElementById('hud-frame-canvas');\n\tconst HUDCtx = HUDCanvas.getContext('2d');\n\n\tconst game = new Game({ gameCanvas, gameCtx, midgroundCtx, backgroundCtx, HUDCtx });\n\tgame.step();\n});\n","const Ship = require('./ship');\n\nclass EnemyShip extends Ship {\n\tconstructor(options) {\n\t\tsuper({\n\t\t\tdeceleration: EnemyShip.DECELERATION,\n\t\t\tdirection: EnemyShip.DIRECTION,\n\t\t\t...options\n\t\t});\n\n\t\tthis.draw = this.draw.bind(this);\n\t}\n\n\tdraw(ctx) {\n\t\tsuper.draw(ctx);\n\t\tif (this.framesDrawn % this.fireRate === 0) this.fire();\n\t}\n}\n\nEnemyShip.DIRECTION = -1;\nEnemyShip.DECELERATION = 1;\n\nmodule.exports = EnemyShip;\n","const StaticObject = require('./static_object');\n\nclass Explosion extends StaticObject {\n\tconstructor(options) {\n\t\tsuper({\n\t\t\tpath: Explosion.PATH,\n\t\t\tscale: Explosion.SCALE,\n\t\t\tspriteWidth: Explosion.SPRITE_WIDTH,\n\t\t\tspriteHeight: Explosion.SPRITE_HEIGHT,\n\t\t\tspriteMaxX: Explosion.SPRITE_MAX_X,\n\t\t\tspriteMaxY: Explosion.SPRITE_MAX_Y,\n\t\t\t...options\n\t\t});\n\n\t\tthis.draw = this.draw.bind(this);\n\t}\n\n\tdraw(ctx) {\n\t\tsuper.draw(ctx);\n\t\tif (this.framesDrawn > Explosion.DURATION) this.remove();\n\t}\n}\n\nExplosion.PATH = './assets/images/sprites/explosion.png';\nExplosion.SPRITE_MAX_X = 5;\nExplosion.SPRITE_MAX_Y = 1;\nExplosion.SCALE = 2;\nExplosion.SPRITE_WIDTH = 16;\nExplosion.SPRITE_HEIGHT = 16;\nExplosion.WIDTH = Explosion.SPRITE_WIDTH * Explosion.SCALE;\nExplosion.HEIGHT = Explosion.SPRITE_HEIGHT * Explosion.SCALE;\nExplosion.DURATION = 100;\n\nmodule.exports = Explosion;\n","const Background = require('./background');\nconst Ship = require('./ship');\nconst Bullet = require('./bullet');\nconst Player = require('./player');\nconst EnemyShip = require('./enemy_ship');\nconst SmallEnemy = require('./small_enemy');\nconst MediumEnemy = require('./medium_enemy');\nconst LargeEnemy = require('./large_enemy');\nconst Explosion = require('./explosion');\nconst Powerup = require('./powerup');\nconst Crystal = require('./crystal');\nconst Score = require('./score');\nconst Util = require('./util');\n\nclass Game {\n\tconstructor({ gameCanvas, gameCtx, midgroundCtx, backgroundCtx, HUDCtx }) {\n\t\tthis.gameCanvas = gameCanvas;\n\t\tthis.ctx = gameCtx;\n\t\tthis.paused = true;\n\n\t\tthis.midgroundCtx = midgroundCtx;\n\t\tthis.backgroundCtx = backgroundCtx;\n\n\t\tthis.HUDCtx = HUDCtx;\n\n\t\tthis.frameIndex = 1;\n\t\tthis.spawnRateFrames = 300;\n\t\tthis.minSpawnRateFrames = 50;\n\t\tthis.spawnChance = 0.6;\n\t\tthis.powerUpDropChance = 1;\n\n\t\tthis.enemies = [];\n\t\tthis.bullets = [];\n\t\tthis.explosions = [];\n\t\tthis.powerups = [];\n\t\tthis.crystals = [];\n\n\t\tthis.level = 1;\n\t\tthis.score = new Score({ game: this });\n\t\tthis.player = new Player({ game: this });\n\t\tthis.generateBackground();\n\n\t\tthis.step = this.step.bind(this);\n\t\tthis.handleKeyDown = this.handleKeyDown.bind(this);\n\t\tthis.handleKeyPress = this.handleKeyPress.bind(this);\n\n\t\tthis.gameCanvas.focus();\n\n\t\tthis.gameCanvas.addEventListener('keydown', this.handleKeyDown);\n\t\tthis.throttledPress = Util.throttle(this.handleKeyPress, this.player.weaponLockout);\n\t\tthis.gameCanvas.addEventListener('keypress', this.throttledPress);\n\n\t\tthis.pauseGradient = this.ctx.createRadialGradient(400, 200, 60, 400, 200, 400);\n\t\tthis.pauseGradient.addColorStop(0, '#35fffd');\n\t\tthis.pauseGradient.addColorStop(1, '#048aac');\n\t}\n\n\tgenerateBackground() {\n\t\tthis.background = new Background({ ctx: this.backgroundCtx, type: 'background', level: this.level });\n\t\tthis.midground = new Background({ ctx: this.midgroundCtx, type: 'midground', level: this.level });\n\t}\n\n\thandleKeyDown(e) {\n\t\tif (e.code === 'KeyW' || e.code === 'ArrowUp') {\n\t\t\tthis.player.boost('up');\n\t\t} else if (e.code === 'KeyS' || e.code === 'ArrowDown') {\n\t\t\tthis.player.boost('down');\n\t\t} else if (e.code === 'KeyA' || e.code === 'ArrowLeft') {\n\t\t\tthis.player.boost('left');\n\t\t} else if (e.code === 'KeyD' || e.code === 'ArrowRight') {\n\t\t\tthis.player.boost('right');\n\t\t} else if (e.code === 'Enter' || (e.code === 'Space' && this.paused)) {\n\t\t\tthis.paused = !this.paused;\n\t\t}\n\t}\n\n\thandleKeyPress(e) {\n\t\tif (e.code === 'Space') this.player.fire();\n\t}\n\n\tallObjects() {\n\t\treturn this.allMovingObjects().concat(...this.explosions, ...this.powerups);\n\t}\n\n\tallMovingObjects() {\n\t\treturn [].concat(this.player, ...this.bullets, ...this.enemies, ...this.crystals);\n\t}\n\n\tadd(obj) {\n\t\tif (obj instanceof Bullet) {\n\t\t\tthis.bullets.push(obj);\n\t\t} else if (obj instanceof EnemyShip) {\n\t\t\tthis.enemies.push(obj);\n\t\t} else if (obj instanceof Explosion) {\n\t\t\tthis.explosions.push(obj);\n\t\t} else if (obj instanceof Powerup) {\n\t\t\tthis.powerups.push(obj);\n\t\t} else if (obj instanceof Crystal) {\n\t\t\tthis.crystals.push(obj);\n\t\t}\n\t}\n\n\tremove(obj) {\n\t\tif (obj instanceof Bullet) {\n\t\t\tthis.bullets = this.bullets.filter(bullet => bullet != obj);\n\t\t} else if (obj instanceof EnemyShip) {\n\t\t\tthis.enemies = this.enemies.filter(enemy => enemy != obj);\n\t\t\tthis.score.addPoints(obj.basePoints);\n\t\t\tthis.add(new Explosion({ pos: obj.pos, game: this }));\n\t\t} else if (obj instanceof Explosion) {\n\t\t\tthis.explosions = this.explosions.filter(explosion => explosion != obj);\n\t\t\tif (Math.random() < this.powerUpDropChance)\n\t\t\t\tthis.add(new Powerup({ pos: obj.pos, game: this, index: Math.floor(Math.random() * 4) }));\n\t\t} else if (obj instanceof Powerup) {\n\t\t\tthis.powerups = this.powerups.filter(powerup => powerup != obj);\n\t\t} else if (obj instanceof Crystal) {\n\t\t\tthis.crystals = [];\n\t\t} else if (obj instanceof Player) {\n\t\t\talert(`You died :( Score: ${this.score.currentScore}`);\n\t\t\tthis.reset();\n\t\t}\n\t}\n\n\tstep() {\n\t\trequestAnimationFrame(this.step);\n\t\tif (!this.paused) {\n\t\t\tthis.HUDCtx.clearRect(0, 0, this.HUDCtx.canvas.width, this.HUDCtx.canvas.height);\n\t\t\tthis.ctx.clearRect(0, 0, this.gameCanvas.width, this.gameCanvas.height);\n\t\t\tthis.allMovingObjects().forEach(obj => obj.move());\n\t\t\tthis.checkCollisions();\n\t\t\tthis.background.draw();\n\t\t\tthis.midground.draw();\n\t\t\tthis.score.draw(this.HUDCtx);\n\t\t\tthis.allObjects().forEach(obj => obj.draw(this.ctx));\n\n\t\t\t// Perform roll to spawn enemy after appropriate number of frames have passed\n\t\t\tif (this.frameIndex % this.spawnRateFrames === 0 && Math.random() < this.spawnChance) {\n\t\t\t\tthis.spawnEnemy();\n\t\t\t}\n\n\t\t\t// Spawn a crystal after player attains score threshold for the current level\n\t\t\tif (this.crystals.length === 0 && this.score.currentScore > Math.pow(this.level, 2) * 1000) {\n\t\t\t\tthis.add(new Crystal({ game: this }));\n\t\t\t}\n\n\t\t\tthis.frameIndex++;\n\t\t} else {\n\t\t\tthis.ctx.fillStyle = this.pauseGradient;\n\t\t\tthis.ctx.fillRect(0, 0, this.gameCanvas.width, this.gameCanvas.height);\n\t\t\tthis.ctx.font = '20px Black Ops One';\n\t\t\tthis.ctx.fillStyle = 'white';\n\t\t\tthis.ctx.fillText('Game Paused', 330, 100);\n\t\t\tthis.ctx.fillText('Press Enter or Space to Start', 230, 150);\n\t\t\tthis.ctx.font = '18px Black Ops One';\n\t\t\tthis.ctx.fillText('Use WASD or Arrow keys to move', 230, 250);\n\t\t\tthis.ctx.fillText('Press or hold Space to fire', 260, 280);\n\t\t\tthis.ctx.fillText('Collect powerups from destroyed ships', 205, 310);\n\t\t\tthis.ctx.fillText('Score points, pick up the crystal, and advance to the next level!', 90, 340);\n\t\t}\n\t}\n\n\tspawnEnemy() {\n\t\tlet enemy;\n\t\tconst rand = Math.random();\n\t\tif (rand < 0.5) {\n\t\t\tconst pos = [this.gameCanvas.width, Math.floor(Math.random() * (this.gameCanvas.height - SmallEnemy.HEIGHT + 1))];\n\t\t\tenemy = new SmallEnemy({ game: this, pos });\n\t\t} else if (rand < 0.8) {\n\t\t\tconst pos = [\n\t\t\t\tthis.gameCanvas.width,\n\t\t\t\tMath.floor(Math.random() * (this.gameCanvas.height - MediumEnemy.HEIGHT + 1))\n\t\t\t];\n\t\t\tenemy = new MediumEnemy({ game: this, pos });\n\t\t} else {\n\t\t\tconst pos = [this.gameCanvas.width, Math.floor(Math.random() * (this.gameCanvas.height - LargeEnemy.HEIGHT + 1))];\n\t\t\tenemy = new LargeEnemy({ game: this, pos });\n\t\t}\n\t\tconsole.log('Spawning', enemy);\n\t\tthis.add(enemy);\n\t}\n\n\tcheckCollisions() {\n\t\tthis.allObjects().forEach((obj1, startIdx) => {\n\t\t\tthis.allObjects()\n\t\t\t\t.slice(startIdx + 1) //Prevent checking multiple times\n\t\t\t\t.forEach(obj2 => {\n\t\t\t\t\tif (obj1.isCollidedWith(obj2) && obj1.direction === -1 * obj2.direction) {\n\t\t\t\t\t\tobj2.remove();\n\t\t\t\t\t\tobj1.remove();\n\t\t\t\t\t} else if (obj1.isCollidedWith(obj2) && obj1 instanceof Player && obj2 instanceof Powerup) {\n\t\t\t\t\t\tthis.player.addPowerup(obj2);\n\t\t\t\t\t\tobj2.remove();\n\t\t\t\t\t} else if (obj1.isCollidedWith(obj2) && obj1 instanceof Player && obj2 instanceof Crystal) {\n\t\t\t\t\t\tthis.levelUp();\n\t\t\t\t\t\tobj2.remove();\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t});\n\t}\n\n\t// Clear enemies, bullets, and explosions. Reset score to 0 and level and multiplier to 1. Generate level 1 backgrounds.\n\treset() {\n\t\tthis.paused = true;\n\t\tthis.enemies = [];\n\t\tthis.bullets = [];\n\t\tthis.explosions = [];\n\t\tthis.powerups = [];\n\t\tthis.crystals = [];\n\t\tthis.score.currentScore = 0;\n\t\tthis.score.multiplier = 1;\n\t\tthis.spawnChance = 0.6;\n\t\tthis.spawnRateFrames = 300;\n\t\tthis.frameIndex = 1;\n\t\tthis.level = 1;\n\t\tthis.player.removePowerups();\n\t\tthis.generateBackground();\n\t}\n\n\tlevelUp() {\n\t\tthis.level++;\n\t\tthis.score.multiplier += 0.5;\n\t\tthis.spawnChance = Math.min(this.spawnChance * 1.1, 1);\n\t\tthis.spawnRateFrames = Math.max(Math.floor(this.spawnRateFrames * 0.9), this.minSpawnRateFrames);\n\t\tthis.generateBackground();\n\t}\n}\n\nmodule.exports = Game;\n","const EnemyShip = require('./enemy_ship');\n\nclass LargeEnemy extends EnemyShip {\n\tconstructor(options) {\n\t\tsuper({\n\t\t\tpath: LargeEnemy.PATH,\n\t\t\tscale: LargeEnemy.SCALE,\n\t\t\tspriteWidth: LargeEnemy.SPRITE_WIDTH,\n\t\t\tspriteHeight: LargeEnemy.SPRITE_HEIGHT,\n\t\t\tspriteMaxX: LargeEnemy.SPRITE_MAX_X,\n\t\t\tspriteMaxY: LargeEnemy.SPRITE_MAX_Y,\n\t\t\tvel: LargeEnemy.STARTING_VARS.VEL,\n\t\t\t...options\n\t\t});\n\t\tthis.topSpeed = LargeEnemy.STARTING_VARS.TOP_SPEED;\n\t\tthis.fireRate = LargeEnemy.STARTING_VARS.FIRE_RATE;\n\t\tthis.bulletScale = LargeEnemy.STARTING_VARS.BULLET_SCALE;\n\t\tthis.bulletSpeed = LargeEnemy.STARTING_VARS.BULLET_SPEED;\n\t\tthis.basePoints = LargeEnemy.STARTING_VARS.BASE_POINTS;\n\t}\n}\n\nLargeEnemy.PATH = './assets/images/sprites/enemy-large.png';\nLargeEnemy.SPRITE_MAX_X = 1;\nLargeEnemy.SPRITE_MAX_Y = 2;\nLargeEnemy.SCALE = 2;\nLargeEnemy.SPRITE_WIDTH = 32;\nLargeEnemy.SPRITE_HEIGHT = 32;\nLargeEnemy.WIDTH = LargeEnemy.SPRITE_WIDTH * LargeEnemy.SCALE;\nLargeEnemy.HEIGHT = LargeEnemy.SPRITE_HEIGHT * LargeEnemy.SCALE;\nLargeEnemy.STARTING_VARS = {\n\tTOP_SPEED: 6,\n\tVEL: [-0.5, 0],\n\tFIRE_RATE: 300,\n\tBULLET_SCALE: 4,\n\tBULLET_SPEED: 2,\n\tBASE_POINTS: 500\n};\n\nmodule.exports = LargeEnemy;\n","const EnemyShip = require('./enemy_ship');\n\nclass MediumEnemy extends EnemyShip {\n\tconstructor(options) {\n\t\tsuper({\n\t\t\tpath: MediumEnemy.PATH,\n\t\t\tscale: MediumEnemy.SCALE,\n\t\t\tspriteWidth: MediumEnemy.SPRITE_WIDTH,\n\t\t\tspriteHeight: MediumEnemy.SPRITE_HEIGHT,\n\t\t\tspriteMaxX: MediumEnemy.SPRITE_MAX_X,\n\t\t\tspriteMaxY: MediumEnemy.SPRITE_MAX_Y,\n\t\t\tvel: MediumEnemy.STARTING_VARS.VEL,\n\t\t\t...options\n\t\t});\n\t\tthis.topSpeed = MediumEnemy.STARTING_VARS.TOP_SPEED;\n\t\tthis.fireRate = MediumEnemy.STARTING_VARS.FIRE_RATE;\n\t\tthis.bulletScale = MediumEnemy.STARTING_VARS.BULLET_SCALE;\n\t\tthis.bulletSpeed = MediumEnemy.STARTING_VARS.BULLET_SPEED;\n\t\tthis.basePoints = MediumEnemy.STARTING_VARS.BASE_POINTS;\n\t}\n}\n\nMediumEnemy.PATH = './assets/images/sprites/enemy-medium.png';\nMediumEnemy.SPRITE_MAX_X = 1;\nMediumEnemy.SPRITE_MAX_Y = 2;\nMediumEnemy.SCALE = 2;\nMediumEnemy.SPRITE_WIDTH = 16;\nMediumEnemy.SPRITE_HEIGHT = 32;\nMediumEnemy.WIDTH = MediumEnemy.SPRITE_WIDTH * MediumEnemy.SCALE;\nMediumEnemy.HEIGHT = MediumEnemy.SPRITE_HEIGHT * MediumEnemy.SCALE;\nMediumEnemy.STARTING_VARS = {\n\tTOP_SPEED: 6,\n\tVEL: [-0.8, 0],\n\tFIRE_RATE: 150,\n\tBULLET_SCALE: 1.5,\n\tBULLET_SPEED: 3,\n\tBASE_POINTS: 250\n};\n\nmodule.exports = MediumEnemy;\n","const StaticObject = require('./static_object');\n\nclass MovingObject extends StaticObject {\n\tconstructor(options) {\n\t\tsuper(options);\n\t\tthis.deceleration = options.deceleration || 1;\n\t\tthis.direction = options.direction;\n\t\tthis.vel = options.vel;\n\t\tthis.speedMultiplier = options.speedMultiplier || 1;\n\t}\n\n\tmove() {\n\t\tthis.pos[0] += this.vel[0] * this.speedMultiplier;\n\t\tthis.pos[1] += this.vel[1] * this.speedMultiplier;\n\n\t\tthis.vel[0] *= this.deceleration;\n\t\tthis.vel[1] *= this.deceleration;\n\n\t\tif (this.pos[0] < -1 * this.width || this.pos[0] > this.game.gameCanvas.width) this.remove();\n\t}\n}\n\nmodule.exports = MovingObject;\n","const Ship = require('./ship');\nconst Util = require('./util');\n\nclass Player extends Ship {\n\tconstructor(options) {\n\t\tsuper({\n\t\t\tpath: Player.PATH,\n\t\t\tscale: Player.SCALE,\n\t\t\tspriteWidth: Player.SPRITE_WIDTH,\n\t\t\tspriteHeight: Player.SPRITE_HEIGHT,\n\t\t\tspriteMaxX: Player.SPRITE_MAX_X,\n\t\t\tspriteMaxY: Player.SPRITE_MAX_Y,\n\t\t\tpos: Player.STARTING_VARS.POS,\n\t\t\tvel: Player.STARTING_VARS.VEL,\n\t\t\tdeceleration: Player.STARTING_VARS.DECELERATION,\n\t\t\tdirection: Player.DIRECTION,\n\t\t\t...options\n\t\t});\n\t\tthis.direction = 1;\n\t\tthis.boostLevel = Player.STARTING_VARS.BOOST_LEVEL;\n\t\tthis.topSpeed = Player.STARTING_VARS.TOP_SPEED;\n\t\tthis.weaponLockout = Player.STARTING_VARS.WEAPON_LOCKOUT;\n\t\tthis.bulletScale = Player.STARTING_VARS.BULLET_SCALE;\n\t\tthis.bulletSpeed = Player.STARTING_VARS.BULLET_SPEED;\n\t\tthis.powerupTimer = -1;\n\t\tthis.activePowerups = [];\n\n\t\tthis.addPowerup = this.addPowerup.bind(this);\n\t\tthis.removePowerups = this.removePowerups.bind(this);\n\t}\n\n\tboost(direction) {\n\t\tswitch (direction) {\n\t\t\tcase 'up':\n\t\t\t\tthis.vel[1] -= this.boostLevel;\n\t\t\t\tthis.vel[1] = Math.max(this.vel[1], -1 * this.topSpeed);\n\t\t\t\tbreak;\n\t\t\tcase 'down':\n\t\t\t\tthis.vel[1] += this.boostLevel;\n\t\t\t\tthis.vel[1] = Math.min(this.vel[1], this.topSpeed);\n\t\t\t\tbreak;\n\t\t\tcase 'left':\n\t\t\t\tthis.vel[0] -= this.boostLevel;\n\t\t\t\tthis.vel[0] = Math.max(this.vel[0], -1 * this.topSpeed);\n\t\t\t\tbreak;\n\t\t\tcase 'right':\n\t\t\t\tthis.vel[0] += this.boostLevel;\n\t\t\t\tthis.vel[0] = Math.min(this.vel[0], this.topSpeed);\n\t\t\t\tbreak;\n\t\t\tdefault:\n\t\t\t\tbreak;\n\t\t}\n\t}\n\n\tmove() {\n\t\t//Restrict movement to window\n\t\tif (this.pos[0] < 0) {\n\t\t\tthis.vel[0] = 0;\n\t\t\tthis.pos[0] = 1;\n\t\t} else if (this.pos[0] > this.game.gameCanvas.width - this.width) {\n\t\t\tthis.vel[0] = 0;\n\t\t\tthis.pos[0] = this.game.gameCanvas.width - this.width - 1;\n\t\t}\n\n\t\tif (this.pos[1] < 0) {\n\t\t\tthis.vel[1] = 0;\n\t\t\tthis.pos[1] = 1;\n\t\t} else if (this.pos[1] > this.game.gameCanvas.height - this.height) {\n\t\t\tthis.vel[1] = 0;\n\t\t\tthis.pos[1] = this.game.gameCanvas.height - this.height - 1;\n\t\t}\n\n\t\tsuper.move();\n\t}\n\n\tdraw(ctx) {\n\t\t// Countdown powerup timer and remove if necessary\n\t\tif (this.powerupTimer >= 0) this.powerupTimer--;\n\t\tif (this.powerupTimer === 0) this.removePowerups();\n\n\t\t// Display current powerups\n\t\tthis.game.HUDCtx.fillStyle = 'white';\n\t\tthis.game.HUDCtx.font = '14px Black Ops One';\n\t\tthis.game.HUDCtx.fillText('Powerup Timer:', 1040, 180);\n\t\tthis.game.HUDCtx.fillText('Active Powerups:', 1035, 250);\n\t\tthis.game.HUDCtx.font = '12px Black Ops One';\n\t\tthis.activePowerups.forEach((powerup, i) => {\n\t\t\tif (i < 9) {\n\t\t\t\tthis.game.HUDCtx.fillText(powerup.type, 1050, 10 + 20 * (i + 13));\n\t\t\t} else if (i === 9) {\n\t\t\t\tif (this.powerupTimer % 60 < 10) {\n\t\t\t\t\tthis.game.HUDCtx.fillStyle = 'red';\n\t\t\t\t} else if (this.powerupTimer % 60 < 20) {\n\t\t\t\t\tthis.game.HUDCtx.fillStyle = 'orange';\n\t\t\t\t} else if (this.powerupTimer % 60 < 30) {\n\t\t\t\t\tthis.game.HUDCtx.fillStyle = 'yellow';\n\t\t\t\t} else if (this.powerupTimer % 60 < 40) {\n\t\t\t\t\tthis.game.HUDCtx.fillStyle = 'green';\n\t\t\t\t} else if (this.powerupTimer % 60 < 50) {\n\t\t\t\t\tthis.game.HUDCtx.fillStyle = 'blue';\n\t\t\t\t} else if (this.powerupTimer % 60 < 60) {\n\t\t\t\t\tthis.game.HUDCtx.fillStyle = 'purple';\n\t\t\t\t}\n\t\t\t\tthis.game.HUDCtx.fillText('SO MANY POWERUPS!', 1035, 5 + 20 * (i + 13));\n\t\t\t}\n\t\t});\n\n\t\tthis.game.HUDCtx.font = '22px Black Ops One';\n\t\tthis.game.HUDCtx.strokeStyle = 'black';\n\t\tthis.game.HUDCtx.fillStyle = 'white';\n\t\tif (this.activePowerups.length > 0) {\n\t\t\tif (this.powerupTimer < 100) {\n\t\t\t\tthis.game.HUDCtx.fillStyle = 'red';\n\t\t\t\tthis.game.HUDCtx.strokeText(this.powerupTimer / 100, 1070, 220);\n\t\t\t} else if (this.powerupTimer < 200) {\n\t\t\t\tthis.game.HUDCtx.fillStyle = 'orange';\n\t\t\t\tthis.game.HUDCtx.strokeText(this.powerupTimer / 100, 1070, 220);\n\t\t\t} else if (this.powerupTimer < 300) {\n\t\t\t\tthis.game.HUDCtx.fillStyle = 'yellow';\n\t\t\t\tthis.game.HUDCtx.strokeText(this.powerupTimer / 100, 1070, 220);\n\t\t\t}\n\t\t\tthis.game.HUDCtx.fillText(this.powerupTimer / 100, 1070, 220);\n\t\t}\n\t\tsuper.draw(ctx);\n\t}\n\n\taddPowerup(powerup) {\n\t\tthis.activePowerups.push(powerup);\n\t\tthis.powerupTimer = Player.POWERUP_DURATION;\n\t\tswitch (powerup.type) {\n\t\t\tcase 'Bigger Bullets!':\n\t\t\t\tthis.bulletScale *= 2;\n\t\t\t\tbreak;\n\t\t\tcase 'Faster Bullets!':\n\t\t\t\tthis.bulletSpeed *= 2;\n\t\t\t\tbreak;\n\t\t\tcase 'So Agile!':\n\t\t\t\tthis.boostLevel *= 2;\n\t\t\t\tbreak;\n\t\t\tcase 'Reload Faster!':\n\t\t\t\tthis.weaponLockout *= 0.5;\n\t\t\t\tthis.game.gameCanvas.removeEventListener('keypress', this.game.throttledPress);\n\t\t\t\tthis.game.throttledPress = Util.throttle(this.game.handleKeyPress, this.weaponLockout);\n\t\t\t\tthis.game.gameCanvas.addEventListener('keypress', this.game.throttledPress);\n\t\t\t\tbreak;\n\t\t}\n\t}\n\n\tremovePowerups() {\n\t\tthis.activePowerups = [];\n\t\tthis.bulletScale = Player.STARTING_VARS.BULLET_SCALE;\n\t\tthis.bulletSpeed = Player.STARTING_VARS.BULLET_SPEED;\n\t\tthis.boostLevel = Player.STARTING_VARS.BOOST_LEVEL;\n\t\tthis.weaponLockout = Player.STARTING_VARS.WEAPON_LOCKOUT;\n\t\tthis.game.gameCanvas.removeEventListener('keypress', this.game.throttledPress);\n\t\tthis.game.throttledPress = Util.throttle(this.game.handleKeyPress, this.weaponLockout);\n\t\tthis.game.gameCanvas.addEventListener('keypress', this.game.throttledPress);\n\t}\n}\n\nPlayer.PATH = './assets/images/sprites/ship.png';\nPlayer.SPRITE_MAX_X = 2;\nPlayer.SPRITE_MAX_Y = 7;\nPlayer.SCALE = 2;\nPlayer.SPRITE_WIDTH = 24;\nPlayer.SPRITE_HEIGHT = 16;\nPlayer.DIRECTION = 1;\nPlayer.POWERUP_DURATION = 600;\nPlayer.STARTING_VARS = {\n\tDECELERATION: 0.99,\n\tWEAPON_LOCKOUT: 600,\n\tBULLET_SCALE: 1,\n\tBULLET_SPEED: 4,\n\tTOP_SPEED: 6,\n\tBOOST_LEVEL: 1,\n\tPOS: [10, 180],\n\tVEL: [0, 0]\n};\n\nmodule.exports = Player;\n","const StaticObject = require('./static_object');\n\nclass Powerup extends StaticObject {\n\tconstructor(options) {\n\t\tsuper({\n\t\t\tpath: Powerup.PATH,\n\t\t\tscale: Powerup.SCALE,\n\t\t\tspriteWidth: Powerup.SPRITE_WIDTH,\n\t\t\tspriteHeight: Powerup.SPRITE_HEIGHT,\n\t\t\tspriteMaxX: Powerup.SPRITE_MAX_X,\n\t\t\tspriteMaxY: Powerup.SPRITE_MAX_Y,\n\t\t\tspriteYOffset: Powerup.SPRITE_HEIGHT * options.index,\n\t\t\t...options\n\t\t});\n\n\t\tswitch (options.index) {\n\t\t\tcase 0:\n\t\t\t\tthis.type = 'Bigger Bullets!';\n\t\t\t\tbreak;\n\t\t\tcase 1:\n\t\t\t\tthis.type = 'Faster Bullets!';\n\t\t\t\tbreak;\n\t\t\tcase 2:\n\t\t\t\tthis.type = 'So Agile!';\n\t\t\t\tbreak;\n\t\t\tcase 3:\n\t\t\t\tthis.type = 'Reload Faster!';\n\t\t\t\tbreak;\n\t\t}\n\n\t\tthis.draw = this.draw.bind(this);\n\t}\n\n\tdraw(ctx) {\n\t\tsuper.draw(ctx);\n\t\tif (this.framesDrawn > Powerup.DURATION) this.remove();\n\t}\n}\n\nPowerup.PATH = './assets/images/sprites/power-up.png';\nPowerup.SPRITE_MAX_X = 2;\nPowerup.SPRITE_MAX_Y = 1;\nPowerup.SCALE = 1;\nPowerup.SPRITE_WIDTH = 16;\nPowerup.SPRITE_HEIGHT = 16;\nPowerup.WIDTH = Powerup.SPRITE_WIDTH * Powerup.SCALE;\nPowerup.HEIGHT = Powerup.SPRITE_HEIGHT * Powerup.SCALE;\nPowerup.DURATION = 600;\n\nmodule.exports = Powerup;\n","class Score {\n\tconstructor({ game }) {\n\t\tthis.currentScore = 0;\n\t\tthis.framesDrawn = 0;\n\t\tthis.multiplier = 1;\n\t\tthis.game = game;\n\t}\n\n\tdraw(ctx) {\n\t\tctx.font = '18px Black Ops One';\n\t\tctx.fillStyle = 'white';\n\t\tctx.fillText('SCORE:', 40, 180);\n\t\tctx.fillText(this.currentScore, 40, 210);\n\t\tctx.fillText('LEVEL:', 40, 260);\n\t\tctx.fillText(this.game.level, 40, 290);\n\n\t\tthis.framesDrawn++;\n\t\tif (this.framesDrawn % 10 === 0) this.currentScore += this.multiplier;\n\t\tthis.currentScore = Math.floor(this.currentScore);\n\t}\n\n\taddPoints(basePoints) {\n\t\tthis.currentScore += basePoints * this.multiplier;\n\t}\n}\n\nmodule.exports = Score;\n","const MovingObject = require('./moving_object');\nconst Bullet = require('./bullet');\n\nclass Ship extends MovingObject {\n\tconstructor(options) {\n\t\tsuper(options);\n\t}\n\n\tfire() {\n\t\tconst pos = this.pos.slice();\n\t\tpos[0] = this.direction > 0 ? pos[0] + this.width : pos[0] - Bullet.SPRITE_WIDTH * this.bulletScale - 1;\n\t\tpos[1] += (this.height - Bullet.SPRITE_HEIGHT * this.bulletScale) / 2;\n\t\tconst vel = [Math.max(this.vel.slice()[0], 0) + this.direction * this.bulletSpeed, 0];\n\t\tconst bullet = new Bullet({ pos, vel, game: this.game, scale: this.bulletScale, direction: this.direction });\n\n\t\tthis.game.add(bullet);\n\t}\n}\n\nmodule.exports = Ship;\n","const EnemyShip = require('./enemy_ship');\n\nclass SmallEnemy extends EnemyShip {\n\tconstructor(options) {\n\t\tsuper({\n\t\t\tpath: SmallEnemy.PATH,\n\t\t\tscale: SmallEnemy.SCALE,\n\t\t\tspriteWidth: SmallEnemy.SPRITE_WIDTH,\n\t\t\tspriteHeight: SmallEnemy.SPRITE_HEIGHT,\n\t\t\tspriteMaxX: SmallEnemy.SPRITE_MAX_X,\n\t\t\tspriteMaxY: SmallEnemy.SPRITE_MAX_Y,\n\t\t\tvel: SmallEnemy.STARTING_VARS.VEL,\n\t\t\t...options\n\t\t});\n\t\tthis.topSpeed = SmallEnemy.STARTING_VARS.TOP_SPEED;\n\t\tthis.fireRate = SmallEnemy.STARTING_VARS.FIRE_RATE;\n\t\tthis.bulletScale = SmallEnemy.STARTING_VARS.BULLET_SCALE;\n\t\tthis.bulletSpeed = SmallEnemy.STARTING_VARS.BULLET_SPEED;\n\t\tthis.basePoints = SmallEnemy.STARTING_VARS.BASE_POINTS;\n\t}\n}\n\nSmallEnemy.PATH = './assets/images/sprites/enemy-small.png';\nSmallEnemy.SPRITE_MAX_X = 1;\nSmallEnemy.SPRITE_MAX_Y = 2;\nSmallEnemy.SCALE = 2;\nSmallEnemy.SPRITE_WIDTH = 16;\nSmallEnemy.SPRITE_HEIGHT = 16;\nSmallEnemy.WIDTH = SmallEnemy.SPRITE_WIDTH * SmallEnemy.SCALE;\nSmallEnemy.HEIGHT = SmallEnemy.SPRITE_HEIGHT * SmallEnemy.SCALE;\nSmallEnemy.STARTING_VARS = {\n\tTOP_SPEED: 6,\n\tVEL: [-1, 0],\n\tFIRE_RATE: 100,\n\tBULLET_SCALE: 1,\n\tBULLET_SPEED: 4,\n\tBASE_POINTS: 100\n};\n\nmodule.exports = SmallEnemy;\n","class StaticObject {\n\tconstructor({\n\t\tpos,\n\t\tpath,\n\t\tscale = 1,\n\t\tspriteXOffset = 0,\n\t\tspriteYOffset = 0,\n\t\tspriteWidth,\n\t\tspriteHeight,\n\t\tgame,\n\t\tspriteMaxX = 1,\n\t\tspriteMaxY = 1\n\t}) {\n\t\tthis.pos = pos;\n\t\tthis.spriteXOffset = spriteXOffset;\n\t\tthis.spriteYOffset = spriteYOffset;\n\t\tthis.spriteWidth = spriteWidth;\n\t\tthis.spriteHeight = spriteHeight;\n\t\tthis.img = new Image();\n\t\tthis.img.src = path;\n\t\tthis.spriteIndex = { x: 0, y: 0, maxX: spriteMaxX, maxY: spriteMaxY };\n\t\tthis.scale = scale;\n\t\tthis.width = this.spriteWidth * this.scale;\n\t\tthis.height = this.spriteHeight * this.scale;\n\t\tthis.game = game;\n\t\tthis.framesDrawn = 0;\n\t}\n\n\tdraw(ctx) {\n\t\tif (this.img.naturalWidth > 0) {\n\t\t\tctx.drawImage(\n\t\t\t\tthis.img,\n\t\t\t\tthis.spriteXOffset + this.spriteIndex.x * this.spriteWidth,\n\t\t\t\tthis.spriteYOffset + this.spriteIndex.y * this.spriteHeight,\n\t\t\t\tthis.spriteWidth,\n\t\t\t\tthis.spriteHeight,\n\t\t\t\tthis.pos[0],\n\t\t\t\tthis.pos[1],\n\t\t\t\tthis.width,\n\t\t\t\tthis.height\n\t\t\t);\n\n\t\t\tif (this.framesDrawn % 10 === 0) {\n\t\t\t\tthis.spriteIndex.x++;\n\t\t\t\tthis.spriteIndex.x = this.spriteIndex.x % this.spriteIndex.maxX;\n\t\t\t\tthis.spriteIndex.y++;\n\t\t\t\tthis.spriteIndex.y = this.spriteIndex.y % this.spriteIndex.maxY;\n\t\t\t}\n\n\t\t\tthis.framesDrawn++;\n\t\t}\n\t}\n\n\txBounds() {\n\t\treturn [this.pos[0], this.pos[0] + this.width];\n\t}\n\n\tyBounds() {\n\t\treturn [this.pos[1], this.pos[1] + this.height];\n\t}\n\n\tisCollidedWith(otherObject) {\n\t\treturn !(\n\t\t\tthis.xBounds()[0] > otherObject.xBounds()[1] ||\n\t\t\tthis.xBounds()[1] < otherObject.xBounds()[0] ||\n\t\t\tthis.yBounds()[0] > otherObject.yBounds()[1] ||\n\t\t\tthis.yBounds()[1] < otherObject.yBounds()[0]\n\t\t);\n\t}\n\n\tremove() {\n\t\tthis.game.remove(this);\n\t}\n}\n\nmodule.exports = StaticObject;\n","const Util = {\n\tthrottle: (func, limit) => {\n\t\tlet throttled;\n\t\treturn (...args) => {\n\t\t\tif (!throttled) {\n\t\t\t\tfunc(...args);\n\t\t\t\tthrottled = true;\n\t\t\t\tsetTimeout(() => (throttled = false), limit);\n\t\t\t}\n\t\t};\n\t}\n};\n\nmodule.exports = Util;\n"],"sourceRoot":""}