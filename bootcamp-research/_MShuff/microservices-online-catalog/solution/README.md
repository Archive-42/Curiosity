
# Microservices Online Catalog (with Docker)

To get the Dockerized version of the application up and running within your
local development environment, complete the following steps:

* Run the command `docker-compose up`.

That's it... one command (assuming that you have a recent version of Docker
Desktop installed on your system)!

After each of the Docker images are created, you'll see the following output in
the terminal indicating that the containers have been created:

```shell
Creating microservices-with-docker_customer-support-db_1 ... done
Creating microservices-with-docker_order-processing-db_1 ... done
Creating microservices-with-docker_catalog-management_1  ... done
Creating microservices-with-docker_order-processing_1    ... done
Creating microservices-with-docker_customer-support_1    ... done
Creating microservices-with-docker_frontend_1            ... done
```

After that, each container will generate output as it starts up. Eventually, the
`frontend_1` container will generate the following output:

```shell
frontend_1             |
frontend_1             | > frontend@0.1.0 start /app
frontend_1             | > react-scripts start
frontend_1             |
frontend_1             | ℹ ｢wds｣: Project is running at http://172.31.0.5/
frontend_1             | ℹ ｢wds｣: webpack output is served from
frontend_1             | ℹ ｢wds｣: Content not from webpack is served from /app/public
frontend_1             | ℹ ｢wds｣: 404s will fallback to /
frontend_1             | Starting the development server...
frontend_1             |
frontend_1             | Compiled successfully!
frontend_1             |
frontend_1             | You can now view frontend in the browser.
frontend_1             |
frontend_1             |   Local:            http://localhost:3000
frontend_1             |   On Your Network:  http://172.31.0.5:3000
frontend_1             |
frontend_1             | Note that the development build is not optimized.
frontend_1             | To create a production build, use npm run build.
frontend_1             |
```

This output should look familiar, as it's generated by the Create React App
tooling. Once you see that output, you can browse to `http://localhost:3000/` to
view the client-side UI.

> Be aware that the first time you run this command, Docker will likely need to
> download some (or all) of the official base images used by the application.
> Given that, depending on your connection speed, it might take some time to
> create images for the application's containers.

At this point, you can make a change to any of the frontend or backend code
files and the appropriate app will detect the change and restart its process. If
you make a change to the React frontend, the browser will automatically reflect
your change (thanks to the Create React App tooling). If you change one of the
backend APIs, you'll need to perform an action to force the API endpoint to be
called again (for this example just refresh/reload the entire page).

To exit the `docker-compose up` command, press `CTRL+C`. You'll see output
confirming that Compose stopped each of the application's contaiers:

```shell
Stopping microservices-with-docker_frontend_1            ... done
Stopping microservices-with-docker_customer-support_1    ... done
Stopping microservices-with-docker_order-processing_1    ... done
Stopping microservices-with-docker_order-processing-db_1 ... done
Stopping microservices-with-docker_catalog-management_1  ... done
Stopping microservices-with-docker_customer-support-db_1 ... done
```

Then you can optionally run the `docker-compose down` command to delete the
application's containers and networks:

```shell
Removing microservices-with-docker_frontend_1            ... done
Removing microservices-with-docker_customer-support_1    ... done
Removing microservices-with-docker_order-processing_1    ... done
Removing microservices-with-docker_order-processing-db_1 ... done
Removing microservices-with-docker_catalog-management_1  ... done
Removing microservices-with-docker_customer-support-db_1 ... done
Removing network microservices-with-docker_default
Removing network microservices-with-docker_customer-support
Removing network microservices-with-docker_order-processing
```

To restart the application, run the `docker-compose up` command again.

> If you change anything in a Dockerfile or the `docker-compose.yml` file,
> you'll need to run the command `docker-compose build` or `docker-compose up
> --build` to update the affected image(s).
