{
  "data": {
    "markdownRemark": {
      "html": "<p>Some of the problems that we have faced in the industry of exposing our code, getting it deployed, is it works great in one environment and in another environment it doesn't work at all, or someone updated the server and it changed everything.</p>\n<p>One of the solutions for distribution not being equal is Docker.</p>\n<h2><a href=\"https://docs.docker.com/\">Docker</a></h2>\n<h4>Paradigm of Docker:</h4>\n<ul>\n<li>\n<p>Docker gives you an image and it goes to that image (which is kind of like a virtual machine or container) and deploys from that container and exposes the URL through that container</p>\n<ul>\n<li>Everything you do with Docker is built from a simple Docker file that you put in your application</li>\n</ul>\n</li>\n<li>Something that works on your machine should work the same on others</li>\n<li>\n<p>Can build a Docker container for any server environment</p>\n<ul>\n<li>PHP environment</li>\n<li>Node environment</li>\n<li>etc.</li>\n</ul>\n</li>\n<li>Will create a run-time environment for the dependencies and packages you give it.</li>\n<li>Piggybacks off your operating system and layers on top of it in containers and so you build your image and the image gets served out of the containers</li>\n</ul>\n<h4>In terms of distribution:</h4>\n<ul>\n<li>Instead of having a single address where your environment could live and servers distributed around the world, you can think of it as an apartment complex where Docker can run as the architecture of the apartment complex and each container can be an individual apartment in the apartment complex.</li>\n<li>You get a lot of distribution that's even and the same in every environment you run it.</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-text line-numbers\"><code class=\"language-text\">- mkdir docker-explore\n- cd docker-explore\n- npm init\n- npm install --save express body-parser\n- touch Dockerfile\n- touch server.js</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<h4>server.js</h4>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-javascript line-numbers\"><code class=\"language-javascript\"><span class=\"token keyword\">const</span> express <span class=\"token operator\">=</span> <span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token string\">'express'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">const</span> bodyParser <span class=\"token operator\">=</span> <span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token string\">'body-parser'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> server <span class=\"token operator\">=</span> <span class=\"token function\">express</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\nserver<span class=\"token punctuation\">.</span><span class=\"token function\">use</span><span class=\"token punctuation\">(</span>bodyParser<span class=\"token punctuation\">.</span><span class=\"token function\">json</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\nserver<span class=\"token punctuation\">.</span><span class=\"token function\">get</span><span class=\"token punctuation\">(</span><span class=\"token string\">'/'</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">req<span class=\"token punctuation\">,</span> res</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    res<span class=\"token punctuation\">.</span><span class=\"token function\">json</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span> success<span class=\"token punctuation\">:</span> <span class=\"token string\">'Hello world!'</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\nserver<span class=\"token punctuation\">.</span><span class=\"token function\">listen</span><span class=\"token punctuation\">(</span><span class=\"token number\">3000</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>err<span class=\"token punctuation\">)</span> console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>err<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">'server is running on 3000'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<h3>Everything you do with Docker lives and dies in this file:</h3>\n<h4>Dockerfile:</h4>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-text line-numbers\"><code class=\"language-text\">/* image you want to build off of (baseImage)\n    8.7 is the version of Node being used\n    Sometimes Docker can&#39;t work with latest version\n    Environment you&#39;ll build on */\n\nFROM node:8.7\n\n/*  set working directory for any subsequent\n    add, copy, command -- entrypoint\n\n    working directory is the root\n    Where you&#39;ll start building this to */\n\nWORKDIR /\n\n/*  at the root, copy package.json and package-lock.json files.\n    lock allows you to stay synchronized in your teams\n    copied to the root of the project\n    will be copied from the project to the docker container\n    Copy package.json/package-lock.json into root\n    COPY package.json package-lock.json ./ */\n\nRUN npm install\n\n/*  wildcard of two dots\n    take everything given to you and copy it over to the container\n    Copy modules over into the image */\n\nCOPY . .\n\n/* expose the port you&#39;re running from */\n\nEXPOSE 3000\n\n/* run npm start */\n\nCMD(&quot;npm&quot;, &quot;start&quot;)</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<h4>in package.json:</h4>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-javascript line-numbers\"><code class=\"language-javascript\"><span class=\"token string\">\"scripts\"</span><span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token string\">\"start\"</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"node server.js\"</span>\n<span class=\"token punctuation\">}</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span></span></pre></div>\n<h2>Docker</h2>\n<ul>\n<li>Need to install on local machine</li>\n<li>\n<p>Make sure it's up and running</p>\n<ul>\n<li>It's keeping a daemon server alive on your machine</li>\n</ul>\n</li>\n<li>Associated with your Docker account (so need to have Docker account)</li>\n</ul>\n<h4>Commands used to get image built:</h4>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-text line-numbers\"><code class=\"language-text\">/* to build image */\n\ndocker build -t docker-explorer .\n\n/* tell docker which port to expose */\n\ndocker run -p 49161:3000 -d docker-explorer\n\n/* returns hash that you can use to run the docker exec command that allows you to look inside container */\n\ndocker exec -it ${hash}\n\nls</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<h5>output of ls:</h5>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-text line-numbers\"><code class=\"language-text\">- Dockerfile\n- bin\n- boot\n- dev\n- etc\n- home\n- lib\n- lib64\n- home\n- media\n- mnt\n- node_modules\n- opt\n- package-lock.json\n- package.json\n- proc\n- root\n- run\n- sbin\n- server.js\n- srv\n- sys\n- tmp\n- usr\n- var</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p><code class=\"language-text\">curl -X GET http://localhost:49161</code>\nProject on localhost:49161, but localhost:3000 not running</p>\n<p>Docker is taking port 3000 and running its own port.\nRight now running locally, not online</p>\n<p>With the use of Docker, you can safely say what it looks like on the local host, it will look like on the world wide web.</p>\n<p><a href=\"https://github.com/LambdaSchool/DevOps-Deployment-Mini\">Docker Repo</a></p>\n<h5>Google Cloud Platform</h5>\n<ul>\n<li>$300 in credits which you won't burn through in any of the apps you create at Lambda or for the first year or whatever</li>\n</ul>",
      "frontmatter": {
        "date": "2018-06-23",
        "title": "CS5: Docker",
        "chapter": null,
        "subtitle": null,
        "tags": ["CS5", "docker", "DevOps"],
        "path": "/CS5-Docker"
      }
    }
  },
  "pageContext": {
    "isCreatedByStatefulCreatePages": false,
    "pathSlug": "/CS5-Docker",
    "prev": {
      "frontmatter": {
        "path": "/CS9-Server-Testing",
        "title": "CS9: Server Testing",
        "tags": ["server testing", "testing"],
        "subtitle": null,
        "chapter": null
      }
    },
    "next": {
      "frontmatter": {
        "path": "/CS5-Heroku",
        "title": "CS5: Heroku",
        "tags": ["CS5", "Heroku", "DevOps"],
        "subtitle": null,
        "chapter": null
      }
    }
  }
}
